// Actually run the tests by building a cluster of free-running JVMs first.
task testSingleNode(type: Exec) {
    dependsOn jar, testJar
    
    environment "PROJECT_NAME", project.name
    environment "BUILD_DIR", project.buildDir

    def args = ['bash', './testSingleNode.sh']
    if (project.hasProperty("jacocoCoverage")) {
        args << 'jacoco'
    }
    commandLine args
}
task testMultiNode(type: Exec) {
    dependsOn jar, testJar
    
    environment "PROJECT_NAME", project.name
    environment "BUILD_DIR", project.buildDir

    def args = ['bash', './testMultiNode.sh']

    if(project.hasProperty('doTestSSL')) {
        args << 'ssl'
    }

    if (project.hasProperty("jacocoCoverage")) {
        args << 'jacoco'
    }
    commandLine args
}
